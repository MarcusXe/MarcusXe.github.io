<!DOCTYPE html>
<html  lang="en,zh-cn" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <meta name="description" content="Bi Hop">
  <link rel="icon" href="/img/icon.png">
  <title>Bi Hop</title>
  
  
  <meta property="og:title" content="Bi Hop">
  
  
  <meta property="og:url" content="http://www.xeby.me/2021/06/15/Socket%20Address/index.html">
  
  
  <meta property="og:img" content="/img/icon.png">
  
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:published_time" content="2021-06-15">
  <meta property="og:article:modified_time" content="2021-06-23">
  <meta property="og:article:author" content="Marcus Xe">
  
  
  
  
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
<link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">

  
  
  
  
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/img/icon.png" alt="logo">
      
      <span class="navbar-logo-dsc">Bi Hop</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">
    
    Home
    
    </a>
    
    <a href="/archives" class="navbar-menu-item">
    
    Archive
    
    </a>
    
    <a href="/tags" class="navbar-menu-item">
    
    Tags
    
    </a>
    
    <a href="/categories" class="navbar-menu-item">
    
    Categories
    
    </a>
    
    <a href="/about" class="navbar-menu-item">
    
    About
    
    </a>
    
    <a href="/links" class="navbar-menu-item">
    
    Friends
    
    </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
    <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size: 1.2rem; font-weight: 400;"></i></a>
  </div>
</nav>
    
    <div id="local-search" style="display: none;">
      <input class="navbar-menu-item" id="search-input" placeholder="请输入搜索内容...">
      <div id="search-content"></div>
    </div>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2021-06-15T13:15:33.358Z">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2021-06-15</span>
    </time>
    
    
    <span class="dot"></span>
    <span>536 words</span>
    
  </div>
  
  </header>
  <div id="section" class="post-content">
    <h2 id="Socket-Address"><a href="#Socket-Address" class="headerlink" title="Socket Address"></a>Socket Address</h2><h3 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h3><pre class="highlight"><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">int</span> domain,<span class="comment">/* AF_UNIX,AF_INET,etc.*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">int</span> type,<span class="comment">/*SOCK_STREAM,SOCKET_DGRAM*/</span></span></span></span><br><span class="line"><span class="function"><span class="params">	<span class="keyword">int</span> protocol)</span></span>;<span class="comment">/*usually zero*/</span></span><br><span class="line"><span class="comment">/* Returns file_desp*/</span></span><br></pre>
<pre class="highlight"><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bind</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> socket_fd,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> struct sockaddr *sa,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">socklen_t</span> sa_len)</span></span>;</span><br><span class="line"><span class="comment">/*Returns 0 OK,-1 errro*/</span></span><br></pre>
<pre class="highlight"><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">listen</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> sockfd,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> baclog<span class="comment">//max connection queue length</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br><span class="line"><span class="comment">/*returns 0 if ok,-1 on error*/</span></span><br></pre>
<pre class="highlight"><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">accept</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> sockfd,</span></span></span><br><span class="line"><span class="function"><span class="params">struct sockaddr* cliadddr,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">socklen_t</span> *addrle</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br><span class="line"><span class="comment">/* Returns: non-negtiave descriptor if OK,-1 on error*/</span></span><br></pre>
<h3 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h3><pre class="highlight"><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">connect</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> struct sockaddr *servaddr,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">socklen_t</span> addrlen</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span></span><br></pre>
<pre class="highlight"><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line">htons()<span class="comment">//short</span></span><br><span class="line">htonl()<span class="comment">//long</span></span><br><span class="line"><span class="comment">//network Bid ending</span></span><br><span class="line"><span class="comment">//intel Little ending</span></span><br></pre>
<h2 id="Socket-Address-Structures"><a href="#Socket-Address-Structures" class="headerlink" title="Socket-Address Structures"></a>Socket-Address Structures</h2><ul>
<li>sockaddr_un for AF_UNIX</li>
<li>sockaddr_in for AF_INET</li>
<li>sockaddr_x25 for AF_X25</li>
</ul>
<pre class="highlight"><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr</span>&#123;</span></span><br><span class="line">    u_char sa_len;</span><br><span class="line">    u_short sa_family;</span><br><span class="line">    <span class="keyword">char</span> sa_data[<span class="number">14</span>];</span><br><span class="line">&#125;</span><br></pre>
<pre class="highlight"><span class="line">INADDR_ANY</span><br></pre>
<pre class="highlight"><span class="line"><span class="function"><span class="keyword">int_addr_t</span> <span class="title">inet_addr</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> <span class="keyword">char</span>* cp</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;<span class="comment">//dotted to integer</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">inet_ntoa</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">struct in_addr in</span></span></span><br><span class="line"><span class="function"><span class="params">)</span><span class="comment">//integer to dotted</span></span></span><br></pre>
<h2 id="Concurrent-Server"><a href="#Concurrent-Server" class="headerlink" title="Concurrent Server"></a>Concurrent Server</h2><h3 id="I-O-Multiplexing"><a href="#I-O-Multiplexing" class="headerlink" title="I/O Multiplexing"></a>I/O Multiplexing</h3><pre class="highlight"><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">    clilen=<span class="keyword">sizeof</span>(cliaddr);</span><br><span class="line">    connfd=accept(listenfd,(SA*)&amp;cliaddr,&amp;clilen);</span><br><span class="line">    <span class="keyword">if</span>((childpid=fork())==<span class="number">0</span>)&#123;<span class="comment">/*child process*/</span></span><br><span class="line">        close(listenfd);<span class="comment">/*close listening socket*/</span></span><br><span class="line">        str_echo(conned);<span class="comment">/*process the request*/</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    close(connfd);<span class="comment">//parent close socket</span></span><br><span class="line">&#125;</span><br></pre>
<h4 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h4><pre class="highlight"><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">select</span> <span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> maxfdpl;</span></span></span><br><span class="line"><span class="function"><span class="params">fd_set *readset;<span class="comment">//interested set of fds</span></span></span></span><br><span class="line"><span class="function"><span class="params">fd_set *writeset;</span></span></span><br><span class="line"><span class="function"><span class="params">fd_set *errorset;</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">const</span> struct timeval *timeout<span class="comment">//how long will it wait</span></span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br><span class="line"><span class="keyword">void</span> FD_SET</span><br><span class="line"><span class="keyword">void</span> FD_ZERO</span><br><span class="line"><span class="keyword">void</span> FD_CLR</span><br><span class="line"><span class="keyword">void</span> FD_ISSET</span><br></pre>
<ul>
<li>A read descriptor set rset is initialized witn one entry,whose index is the listen socket 3,  set as 1(always)</li>
<li>Array client[FD_SET_SIZE]contains the connected socket address.</li>
</ul>
<pre class="highlight"><span class="line">listen(listenfd,LISTENNQ);</span><br><span class="line">amxfd=listenfd;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">    rset =allset;</span><br><span class="line">    nready=select(maxfd+<span class="number">1</span>,&amp;rset,<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">if</span>(FD_ISSET(listenfd,&amp;rset))&#123;</span><br><span class="line">        connfd=accept(litenfd,(SA*)&amp;cliaddr,&amp;clilen);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre>
<h4 id="Poll"><a href="#Poll" class="headerlink" title="Poll"></a>Poll</h4><pre class="highlight"><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">poll</span><span class="params">(struct pollfd *fds,<span class="keyword">nfds_t</span> nfds,<span class="keyword">int</span> timeout)</span></span>;</span><br><span class="line"><span class="function">struct <span class="title">pollfd</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> fd;</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">short</span> events;</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">short</span> revents;</span></span></span><br><span class="line"><span class="function"><span class="params">)</span></span>;</span><br></pre>
<h4 id="Epoll"><a href="#Epoll" class="headerlink" title="Epoll"></a>Epoll</h4>  <pre class="highlight"><span class="line">flags=fcatl(fd,F_GETFL);</span><br><span class="line">fcntl(fd,F_SETFL,flags|O_NONBLOCK); </span><br><span class="line">epfd=epoll_creat(argc<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">if</span>(epfd=<span class="number">-1</span>)</span><br><span class="line">    errexit(<span class="string">&quot;&quot;</span>);</span><br><span class="line">ev.event=EPOLLIN;</span><br><span class="line">ev.data.fd=fd;</span><br><span class="line">epoll_ctl(epfd,EPOLL_CTL_ADD,fd,&amp;ev);</span><br><span class="line"><span class="keyword">for</span>(;;)&#123;</span><br><span class="line">    ready=epoll_wait(epfd,evlist,MAX_EVENTS，<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(evlist[j].events&amp;EPOLLIN)</span><br><span class="line">&#125;</span><br></pre>
<h3 id="POSIX-Signal-Handling"><a href="#POSIX-Signal-Handling" class="headerlink" title="POSIX Signal Handling"></a>POSIX Signal Handling</h3><p>Conflict between <code>waitpid</code> and <code>accept</code>, both block.</p>
<pre class="highlight"><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sig_child</span><span class="params">(<span class="keyword">int</span> signo)</span></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> stat;</span><br><span class="line">    <span class="keyword">while</span>((pid=waitpid(<span class="number">-1</span>,&amp;stat,WNOHAND))&gt;<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;child %d terminated\n&quot;</span>,pid);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sigaction</span> <span class="title">act</span> ,<span class="title">oact</span>;</span></span><br><span class="line">act.sa_handler=sig_child;</span><br><span class="line">sigmptyset(&amp;act.samask);</span><br><span class="line">act.sa_flag=<span class="number">0</span>;</span><br></pre>
<h3 id="Jobs"><a href="#Jobs" class="headerlink" title="Jobs"></a>Jobs</h3><ol>
<li>Process  Group</li>
<li>Session</li>
<li>Forground and background process group</li>
<li>ctrl-z</li>
<li>bg fg</li>
</ol>
<pre class="highlight"><span class="line">fork()==<span class="number">0</span>:<span class="built_in">exit</span>;</span><br><span class="line">setsid();</span><br><span class="line">Signal（SIGHUB,SIG_IGN);</span><br><span class="line">fork()==<span class="number">0</span>;<span class="built_in">exit</span>;</span><br><span class="line"><span class="keyword">for</span>(inti=<span class="number">0</span>;i&lt;MAXFD;i++)</span><br><span class="line">    close(i);</span><br><span class="line">open(<span class="string">&quot;/dev/null&quot;</span>,O_RDONLY);</span><br><span class="line">open(<span class="string">&quot;/dev/null&quot;</span>,O_RDWR);</span><br><span class="line">open(<span class="string">&quot;/dev/null&quot;</span>,O_RDWR);</span><br><span class="line">openlog(pname,LOG_PID,facility);</span><br></pre>
<h3 id="Super-Server"><a href="#Super-Server" class="headerlink" title="Super Server"></a>Super Server</h3><p>socket-&gt;bind-&gt;listen-&gt;select-&gt;accept-&gt;fork-&gt;child-&gt;close all desc other than socket-&gt;dup socket to socket-&gt;setgid-&gt;setuid-&gt;exec;</p>
<p><code>daemon_inetd(argv[0],0)</code></p>
<h3 id="Nonblock"><a href="#Nonblock" class="headerlink" title="Nonblock"></a>Nonblock</h3> <pre class="highlight"><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">str_cli</span><span class="params">(File*fp,<span class="keyword">int</span> sockfd)</span></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">char</span> sendline[MAXLINE],recvline[MAXLINE];</span><br><span class="line">    <span class="keyword">if</span>(readline(sockfd,recvline,MAXLINE)&gt;<span class="number">0</span>)</span><br><span class="line">        Fputs </span><br><span class="line">&#125;</span><br></pre>
<h3 id="Mutex-lock"><a href="#Mutex-lock" class="headerlink" title="Mutex lock"></a>Mutex lock</h3><pre class="highlight"><span class="line"><span class="keyword">pthread_mutex_t</span> counter_mutex=PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line">Pthread_mutex_lock(&amp;conter_mutex);</span><br><span class="line">counter++;</span><br><span class="line">Pthread_mutex_lock(&amp;counter_mutex);</span><br></pre>
<h3 id="Conditional-Varible"><a href="#Conditional-Varible" class="headerlink" title="Conditional Varible"></a>Conditional Varible</h3><pre class="highlight"><span class="line"><span class="keyword">pthread_cond_t</span> cond_consumer;</span><br><span class="line">Pthread_cond_wait(b_condi_consumer,&amp;b_mutex);</span><br><span class="line">Pthread_cond_signal(&amp;b_condi_consumer)</span><br></pre>

  </div>
  <div>
  
  <div class="post-note note-warning copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">作者：</span><a target="_blank" rel="nofollow noopener noreferrer" href="http://www.xeby.me/about">Marcus Xe</a></p>
    <p><span style="font-weight: bold;">文章链接：</span><a target="_blank" rel="nofollow noopener noreferrer" href="http://www.xeby.me/2021/06/15/Socket%20Address/">http://www.xeby.me/2021/06/15/Socket%20Address/</a></p>
    <p><span style="font-weight: bold;">版权声明：</span>本博客所有文章除特别声明外，均采用<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 协议</a>。转载请注明出处！</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/2021/06/29/Linux内核分析/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">Prev</div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/2021/04/25/本田小狼与我/" class="nav-link">
      <div>
        <div class="nav-label">Next</div>
        
        <div class="nav-title">本田小狼与我 </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address"><span class="toc-text">Socket Address</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Server"><span class="toc-text">Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Client"><span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address-Structures"><span class="toc-text">Socket-Address Structures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Concurrent-Server"><span class="toc-text">Concurrent Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O-Multiplexing"><span class="toc-text">I&#x2F;O Multiplexing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Select"><span class="toc-text">Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Poll"><span class="toc-text">Poll</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Epoll"><span class="toc-text">Epoll</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POSIX-Signal-Handling"><span class="toc-text">POSIX Signal Handling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jobs"><span class="toc-text">Jobs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Super-Server"><span class="toc-text">Super Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nonblock"><span class="toc-text">Nonblock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutex-lock"><span class="toc-text">Mutex lock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conditional-Varible"><span class="toc-text">Conditional Varible</span></a></li></ol></li></ol>
</div></main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/img/icon.png" class="author-img">

<p class="author-name">Marcus Xe</p>
<p class="author-description"></p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>20</span>
    <span>Posts</span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>6</span>
    <span>Categories</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>5</span>
    <span>Tags</span>
  </a>
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address"><span class="toc-text">Socket Address</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Server"><span class="toc-text">Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Client"><span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address-Structures"><span class="toc-text">Socket-Address Structures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Concurrent-Server"><span class="toc-text">Concurrent Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O-Multiplexing"><span class="toc-text">I&#x2F;O Multiplexing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Select"><span class="toc-text">Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Poll"><span class="toc-text">Poll</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Epoll"><span class="toc-text">Epoll</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POSIX-Signal-Handling"><span class="toc-text">POSIX Signal Handling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jobs"><span class="toc-text">Jobs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Super-Server"><span class="toc-text">Super Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nonblock"><span class="toc-text">Nonblock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutex-lock"><span class="toc-text">Mutex lock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conditional-Varible"><span class="toc-text">Conditional Varible</span></a></li></ol></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>Categories</div>
  <div class="categories-list">
    
      <a href="/categories/Programming Languages">
        <div class="categories-list-item">
          Programming Languages
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/Linux">
        <div class="categories-list-item">
          Linux
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/Geography">
        <div class="categories-list-item">
          Geography
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/DataBase">
        <div class="categories-list-item">
          DataBase
          <span class="categories-list-item-badge">8</span>
        </div>
      </a>
    
      <a href="/categories/HardWare">
        <div class="categories-list-item">
          HardWare
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/Skills">
        <div class="categories-list-item">
          Skills
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>hot tags</div>
  <div class="tags-list">
    
    <a href="\tags\Bash" title="Bash"><div class="tags-list-item">Bash</div></a>
    
    <a href="\tags\Arch Manjaro Kernel" title="Arch Manjaro Kernel"><div class="tags-list-item">Arch Manjaro Kernel</div></a>
    
    <a href="\tags\Rocks" title="Rocks"><div class="tags-list-item">Rocks</div></a>
    
    <a href="\tags\Oracle" title="Oracle"><div class="tags-list-item">Oracle</div></a>
    
    <a href="\tags\Archtacture" title="Archtacture"><div class="tags-list-item">Archtacture</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">
  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>TOC</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address"><span class="toc-text">Socket Address</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Server"><span class="toc-text">Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Client"><span class="toc-text">Client</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-Address-Structures"><span class="toc-text">Socket-Address Structures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Concurrent-Server"><span class="toc-text">Concurrent Server</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#I-O-Multiplexing"><span class="toc-text">I&#x2F;O Multiplexing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Select"><span class="toc-text">Select</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Poll"><span class="toc-text">Poll</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Epoll"><span class="toc-text">Epoll</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POSIX-Signal-Handling"><span class="toc-text">POSIX Signal Handling</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jobs"><span class="toc-text">Jobs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Super-Server"><span class="toc-text">Super Server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nonblock"><span class="toc-text">Nonblock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutex-lock"><span class="toc-text">Mutex lock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conditional-Varible"><span class="toc-text">Conditional Varible</span></a></li></ol></li></ol>
  </article>
  
  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>Recent Posts</div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-06-29</div>
        <a href="/2021/06/29/Linux内核分析/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-06-15</div>
        <a href="/2021/06/15/Socket Address/"><div class="recent-posts-item-content"></div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-25</div>
        <a href="/2021/04/25/本田小狼与我/"><div class="recent-posts-item-content">本田小狼与我</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2021-04-25</div>
        <a href="/2021/04/25/SuiVi/"><div class="recent-posts-item-content">SuiVi</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      <div class="footer-dsc">
        <span>Copyright ©
          
          2020 -
          
          2021
        </span>
        &nbsp;
        <a href="/" class="footer-link">Bi Hop </a>
      </div>
    </div>

    
    <div class="footer-dsc">
      
      Powered by
      <a href="https://hexo.io/" class="footer-link" target="_blank" rel="nofollow noopener noreferrer">&nbsp;Hexo </a>
      
      
      <span>&nbsp;|&nbsp;</span>
      
      
      Theme -
      <a href="https://github.com/theme-kaze" class="footer-link" target="_blank"
        rel="nofollow noopener noreferrer">&nbsp;Kaze</a>
      
    </div>
    
    
    
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton"  aria-label="回到顶部">
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton" aria-label="控制中心">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget" aria-label="夜色模式">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a role="button" id="searchbutton" class="basebutton searchwidget" aria-label="搜索">
  <i class="iconfont icon-search button-icon"></i>
</a>

  
  
  

  
  
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
      };
    </script>
    
<script src="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js"></script>

  

  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('aria-label', 'illustration');
      wrapper.style.cssText = 'width: 100%; display: flex; justify-content: center;';
      if (img[i].alt) wrapper.dataset.caption = img[i].alt;
      wrapper.dataset.nolink = true;
      img[i].before(wrapper);
      wrapper.append(img[i]);
      var divWrap = document.createElement('div');
      divWrap.classList.add('gallery');
      wrapper.before(divWrap);
      divWrap.append(wrapper);
    }
    baguetteBox.run('.gallery');
  }
</script>
<script>loadScript("/js/lib/lightbox/baguetteBox.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
</body>

</html>